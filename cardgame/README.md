# cardgame — Угадай карту до дамы

**Задача на отладку:** в коде есть несколько ошибок, из-за которых программа работает неправильно. Найди и исправь их!

## Описание

Программист решил написать игру для проверки интуиции, используя API https://deckofcardsapi.com.

В рамках этой игры:
1. Создаётся новая перетасованная колода карт
2. Пользователю предлагается угадать, сколько карт нужно снять, пока не встретится дама (QUEEN любой масти)
3. Из колоды по одной вытягиваются карты и печатаются
4. Когда встречается дама, выводится результат — угадал пользователь или нет

## API

Используется публичное API: https://deckofcardsapi.com/api

### Создание и перетасовка колоды
```
GET /deck/new/shuffle/?deck_count=1
```

Ответ:
```json
{
  "success": true,
  "deck_id": "3p40paa87x90",
  "shuffled": true,
  "remaining": 52
}
```

### Вытягивание карт
```
GET /deck/{deck_id}/draw/?count=1
```

Ответ:
```json
{
  "success": true,
  "deck_id": "3p40paa87x90",
  "cards": [
    {
      "code": "QH",
      "image": "https://deckofcardsapi.com/static/img/QH.png",
      "images": {...},
      "value": "QUEEN",
      "suit": "HEARTS"
    }
  ],
  "remaining": 51
}
```

Где `value` может быть: `"ACE"`, `"2"`, `"3"`, ..., `"10"`, `"JACK"`, `"QUEEN"`, `"KING"`.

## Что нужно сделать

Изучи код в `cardgame.go` и **найди ошибки**. Код не работает правильно!

Подсказка: ошибок как минимум **2-3 штуки**. Внимательно читай, что делает каждая строка.

## Требования

1. Структура `Client` содержит настройки для работы с API:
   - `baseURL` — базовый URL для API
   - `client` — HTTP клиент
   - `output` — куда писать вывод (для тестирования)

2. Функция `NewClient()` создаёт клиент с настройками по умолчанию

3. Метод `PlayGame(userGuess int) (bool, error)` должен:
   - Создать новую колоду и перетасовать её
   - Вытягивать карты по одной, пока не встретится дама
   - Печатать каждую карту в формате `"{value} of {suit}"`
   - Вернуть `true`, если пользователь угадал количество карт, иначе `false`
   - Вернуть ошибку, если что-то пошло не так с API

4. При вытягивании карт используй правильный параметр `count`

5. Правильно обрабатывай ответ от API (помни, что `cards` — это массив)

6. Для обратной совместимости есть функция `PlayGame(userGuess int)`, которая создаёт клиент и вызывает метод

## Пример работы

```
Сколько карт надо снять, пока не встретим даму? 5
7 of DIAMONDS
3 of CLUBS
KING of SPADES
ACE of HEARTS
QUEEN of HEARTS
Вы угадали!
```

или

```
Сколько карт надо снять, пока не встретим даму? 10
4 of CLUBS
9 of DIAMONDS
2 of SPADES
QUEEN of CLUBS
Вы проиграли! Правильный ответ: 3
```

## Подсказки

- Внимательно посмотри на параметр `count` при вытягивании карт
- Проверь, правильно ли обрабатывается массив `cards` из ответа API
- Убедись, что счётчик `realCount` увеличивается корректно
- Проверь логику сравнения в конце игры

## Тестирование

Для тестирования используется библиотека `httptest` из стандартной библиотеки Go:

```go
// Создаём mock-сервер
server := httptest.NewServer(handler)
defer server.Close()

// Создаём клиента с URL мок-сервера
client := &Client{
    baseURL: server.URL,
    client:  server.Client(),
    output:  &buffer,
}
```

Это позволяет тестировать код без реальных сетевых запросов.

